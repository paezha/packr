<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>packr-vignette â€¢ packr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="packr-vignette">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">packr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/packr-vignette.html">packr-vignette</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/paezha/packr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>packr-vignette</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/paezha/packr/blob/master/vignettes/packr-vignette.Rmd" class="external-link"><code>vignettes/packr-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>packr-vignette.Rmd</code></div>
    </div>

    
        <div class="abstract">
      <p class="abstract">Abstract</p>
      An important element of reproducible research is documenting all
      steps of the process, including data analysis. This vignette,
      developed for the <code>packr</code> package (a minimal example of
      package building), will show how to document data analysis in a
      self-contained and reproducible document. To this end, the data
      set <code>energy_and_emissions</code> (included in the
      <code>packr</code> package) will be used.
    </div>
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette illustrate the use of the dataset and utility functions
included in the package <code>packr</code>. I collected this data set
initially to use in my course GEOG 3LT3: Transportation Geography. As
part of this course, students examine some trends in transportation,
including the use of energy and emissions. The objective of the practice
is two-fold:</p>
<ol style="list-style-type: decimal">
<li><p>On the side of technology, the students are learning to work with
R Notebooks and R. For this reason, all code is documented so that the
students can see <em>how</em> things are done.</p></li>
<li><p>On the side of transportation geography, the students are
learning to discern trends in transportation.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="preliminaries">Preliminaries<a class="anchor" aria-label="anchor" href="#preliminaries"></a>
</h2>
<p>Load the packages used in this vignette:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/paezha/packr" class="external-link">packr</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="loading-the-data">Loading the data<a class="anchor" aria-label="anchor" href="#loading-the-data"></a>
</h2>
<p>To load the data, use the function <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"energy_and_emmisions"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in data("energy_and_emmisions"): data set 'energy_and_emmisions' not</span></span>
<span><span class="co">#&gt; found</span></span></code></pre></div>
<p>To inspect the dataframe, use the function <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">energy_and_emissions</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Country               Area            Population                   PYear    </span></span>
<span><span class="co">#&gt;  Length:188         Min.   :      54   Min.   :5.292e+03   JULY 2017 EST.:188  </span></span>
<span><span class="co">#&gt;  Class :character   1st Qu.:   25618   1st Qu.:1.955e+06                       </span></span>
<span><span class="co">#&gt;  Mode  :character   Median :  113098   Median :8.101e+06                       </span></span>
<span><span class="co">#&gt;                     Mean   :  666756   Mean   :3.847e+07                       </span></span>
<span><span class="co">#&gt;                     3rd Qu.:  479278   3rd Qu.:2.558e+07                       </span></span>
<span><span class="co">#&gt;                     Max.   :16377742   Max.   :1.379e+09                       </span></span>
<span><span class="co">#&gt;      GDPPC            bblpd           EYear        CO2_1995      </span></span>
<span><span class="co">#&gt;  Min.   :   145   Min.   :     400   2014:148   Min.   :     12  </span></span>
<span><span class="co">#&gt;  1st Qu.:  1817   1st Qu.:   13000   2015: 34   1st Qu.:    936  </span></span>
<span><span class="co">#&gt;  Median :  5620   Median :   53000   2016:  6   Median :   6661  </span></span>
<span><span class="co">#&gt;  Mean   : 13572   Mean   :  490635              Mean   : 121256  </span></span>
<span><span class="co">#&gt;  3rd Qu.: 16148   3rd Qu.:  255500              3rd Qu.:  61534  </span></span>
<span><span class="co">#&gt;  Max.   :100161   Max.   :19530000              Max.   :5294648  </span></span>
<span><span class="co">#&gt;     CO2_2005          CO2_2015           Continent </span></span>
<span><span class="co">#&gt;  Min.   :     14   Min.   :      28   Africa  :50  </span></span>
<span><span class="co">#&gt;  1st Qu.:   1379   1st Qu.:    2153   Americas:41  </span></span>
<span><span class="co">#&gt;  Median :   8434   Median :   10062   Asia    :47  </span></span>
<span><span class="co">#&gt;  Mean   : 152549   Mean   :  184978   Europe  :36  </span></span>
<span><span class="co">#&gt;  3rd Qu.:  62283   3rd Qu.:   75294   Oceania :12  </span></span>
<span><span class="co">#&gt;  Max.   :6174717   Max.   :10641789   NA's    : 2</span></span></code></pre></div>
<p>The data frame consists of 10 variables. The variable definitions can
be consulted in the help file:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">energy_and_emissions</span></span>
<span><span class="co">#&gt; No documentation for 'energy_and_emissions' in specified packages and libraries:</span></span>
<span><span class="co">#&gt; you could try '??energy_and_emissions'</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="are-population-and-oil-consumption-related">Are population and oil consumption related?<a class="anchor" aria-label="anchor" href="#are-population-and-oil-consumption-related"></a>
</h2>
<p>The dataframe includes information on population, GDP per capita,
energy consumption, and emissions for world countries. The consumption
of energy (in barrels per day) is for the country. We can plot these two
variables to see if there is a trend. We create a scatterplot with
<code>x = Population</code> and <code>y = bblpd</code>, so that the
values of population are mapped to the x-axis, and the values of energy
consumption are mapped to the y-axis:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simple Scatterplot</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">Population</span>,</span>
<span>     <span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">bblpd</span>, </span>
<span>     main<span class="op">=</span><span class="st">"Scatterplot Example"</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"Population "</span>, </span>
<span>     ylab<span class="op">=</span><span class="st">"Barrels of oil per day "</span>, </span>
<span>     pch<span class="op">=</span><span class="fl">19</span><span class="op">)</span></span></code></pre></div>
<p><img src="packr-vignette_files/figure-html/energy-by-population-1.png" width="700"></p>
<p>Not suprisingly, there is a strong association between these two
variables, since countries with big populations will consume more energy
than small countries with small populations. This is not very
informative, because the underlying relationship is simply size.</p>
</div>
<div class="section level2">
<h2 id="what-is-the-per-capita-consumption-of-oil-by-country">What is the per capita consumption of oil by country?<a class="anchor" aria-label="anchor" href="#what-is-the-per-capita-consumption-of-oil-by-country"></a>
</h2>
<p>Instead of exploring energy consumption by population, we will look
at energy consumption per capita. This is a more informative variable,
because it normalizes by size, and potentially can tell us something
about the <em>intensity</em> and/or <em>efficiency</em> of energy use.
However, energy consumption per capita is not one of the variables in
the dataset. We need to divide the variable <code>bblpd</code> by
<code>Population</code> to add this variable to the dataframe:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">EPC</span> <span class="op">&lt;-</span> <span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">bblpd</span><span class="op">/</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">Population</span></span></code></pre></div>
<p>Check the descriptive statistics of <code>EPC</code> (energy
consumption in barrels per day per person):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">EPC</span><span class="op">)</span></span>
<span><span class="co">#&gt;      Min.   1st Qu.    Median      Mean   3rd Qu.      Max. </span></span>
<span><span class="co">#&gt; 0.0001308 0.0035039 0.0107354 0.0211934 0.0270790 0.2193948</span></span></code></pre></div>
<p>The maximum consumption is approximately 0.22 barrels per person per
day. Which country is that?</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">energy_and_emissions</span><span class="op">[</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">EPC</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">EPC</span><span class="op">)</span>, <span class="st">"Country"</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] "SINGAPORE"</span></span></code></pre></div>
<p>The country with the highest per capita oil consumption in the world
according the the data is Singapore.</p>
</div>
<div class="section level2">
<h2 id="are-gdp-per-capita-and-energy-consumption-per-capita-related">Are GDP per capita and energy consumption per capita related?<a class="anchor" aria-label="anchor" href="#are-gdp-per-capita-and-energy-consumption-per-capita-related"></a>
</h2>
<p>To answer this question, we can create a scatterplot of the two
variables:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">GDPPC</span>, </span>
<span>     <span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">EPC</span>, </span>
<span>     main<span class="op">=</span><span class="st">"Scatterplot Example"</span>,</span>
<span>     xlab<span class="op">=</span><span class="st">"GDP per capita "</span>, </span>
<span>     ylab<span class="op">=</span><span class="st">"Energy consumption per capita (bbpd/population) "</span>, </span>
<span>     pch<span class="op">=</span><span class="fl">19</span><span class="op">)</span></span></code></pre></div>
<p><img src="packr-vignette_files/figure-html/scatterplot-gdppc-epc-1.png" width="700"></p>
<p>Calculate the correlation between these two variables:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">GDPPC</span>, <span class="va">energy_and_emissions</span><span class="op">$</span><span class="va">EPC</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.6239777</span></span></code></pre></div>
<p>There is a moderately strong correlation between these two
variables.</p>
<p>What do we learn from this analysis? And how would you extend this
analysis?</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Antonio Paez.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
